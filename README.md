# enaza test app

```
Тестовое задание fullstack-разработчик

В бар приходят посетители выпивают и заказывают музыку. 
У каждого посетителя есть любимый жанр музыки.
Если играет композиция любимого жанра посетителя он идет танцевать, иначе он идет в бар и берет себе коктейли.

Необходимо эмулировать бар с произвольным кол-вом посетителей. 
Реализовать код, с помощью которого можно собрать в клуб определенную публику.
Желательно, чтобы код был расширяем.
Отображение процесса жизни бара произвести с помощью любого js-фреймворка, обновления сделать через ajax. Внешний вид (дизайн) не принципиален.
Результат должен быть проверяемым: должно быть понятно, какая музыка играет, и какой конкретно посетитель какие действия выполняет.
Проект должен быть загружен на github или gitlab или любой другой публичный сервис управления репозиториями. Процедура установки должна быть описана в Readme.md.

Дополнительно (не обязательно, но будет плюсом):
1. Наличие тестов;
2. Использование менеджера пакетов, как на backend, так и на frontend, сторонних библиотек и фреймворков;
3. Использование механизма мультипоточности/мультипроцессинга;
4. Возможность запрашивать текущее состояние бара;
5. Ограничение доступа, авторизация;
6. Настроенные docker-образа, docker-compose.
7. Фронтенд из двух страниц. Бар и Танцпол. Добавить в зафиксированном окне (в любой части экрана) журнал: при смене жанра музыки делать запись в журнал в формате [жанр - сколько людей танцевало - сколько людей было в баре]. Журнал копится до обновления страницы, т.е. только на фронтенде. Но при переходе между баром и танцполом его состояние должно сохраняться.

Если не успеваете выполнить дополнительные задачи, можете их описать отдельно, как бы вы их реализовывали, какие пункты важные, какие не стоит выполнять и почему.
```

# Установка и запуск через докер

```
TODO: Сборку контейнера перед стартом для клиента + установка зависимостей перед стартом для сервера

NOTE: должны быть установлены: git, composer, npm, docker, docker-compose

git clone .../enazaTest

cd ./enazaTest/server

composer install

cd ../client

npm install

npm run build

cd ../

cp .env.example .env и настроить

docker-compose -f docker-compose.yml pull

docker-compose -f docker-compose.yml down --remove-orphans

docker exec -it enazatest_php_1 php yii migrate --interactive=0

docker exec -it enazatest_php_1 php yii data/init

docker-compose -f docker-compose.yml up --detach
```

# Использование

Добавить в /etc/hosts хосты enaza-server.local и enaza-client.local

Документация для api тут http://enaza-server.local/api/v1/docs 

api-key для авторизации в api "Bearer 100-token"

Проверять работоспособность клиента тут http://enaza-client.local

Дополнительная документация для [клиента](client)

Дополнительная документация для [сервера](server)
